# Node business layer Template
This template provides a starter project that implements best practices in Node.js, REST and Domain-Driven Design. Features include:
- Use of the [Hexagonal Architecture](http://alistair.cockburn.us/Hexagonal+architecture) to arrange the application into logical layers, with well-defined responsibilities.
- [Sequelize](https://github.com/sequelize/sequelize) is used for SQL request.
- [Mocha](https://github.com/mochajs/mocha) is used for automated testing.
- [Express](http://expressjs.com/) framework is used for implemented RESTful.
- [Winston](https://github.com/winstonjs/winston) is used for logging.

## Requirements

- Install Node
    - on OSX, install [home brew](http://brew.sh/) and type `brew install node`
    - on ubuntu, type `apt-get install node`

## Quick Start
Run the application locally:
```bash
$ npm install .
$ npm start
```
- `npm install` will install the required node libraries under `node_modules`.
- `npm start` is a quick way to start the application in non-development mode.

To verify that the application is working correctly, point your browser to [http://localhost:4242/](http://localhost:4242/) - you should see a JSON response.

```
{
  "message": "This is the api you are looking for"
}
```

## Folder Structure

### Highest Level Structure

```
/app
/build
/node_modules
/test
```

- `app:` contains all the source files for the RESTful server
- `build`: folder generated by babel when you use `npm start`
- `node_modules:` Node.js modules downloaded by `npm install` (do not check in)
- `test:` server tests

### App Folder Structure

```
/app
    /api
    /business
    /sql
```

The server folder contains sub-folders that arrange the application into logical layers as suggested by the [Hexagonal Architecture](http://alistair.cockburn.us/Hexagonal+architecture) (a.k.a. the [Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)):

- The `api` layer for set all routes you want to create on your api and deserialize data.

- The `business` layer for put all your business code.

- The `sql` layer for interact directly with the SQL database

Otherwise, if you want to use an another database, for example, Neo4j, you should create a `Neo4j` folder with a Neo4j class who set all connection with the database on the constructor.


## Configuration

Before running your project, you probably need to configure the template.

### API Configuration

```
/app
    /api
        /Configuration.js
```

- `name` is the name of your project. (display by the logger)
- `description` is a brief description. (display by the logger)
- `version` is the current revision.
- `port` which port your want to bind api.

### SQL Configuration

```
/sql
    /Configuration.js
```

- `user` MySQL user.
- `password` MySQL password
- `host` IP/DNS of MySQL server.
- `port` MySQL binding port.
- `database` MySQL database.
- `type` Sequelize dialect, see [this](http://docs.sequelizejs.com/en/1.7.0/docs/usage/).

```
/sql
    /models
```

You should define all schema you will use on the api, it must be defined this way :

```
export const CustomSchema = {
    "name": "name_table",
    "schema": {
        "id": {
            type: Sequelize.INTEGER,
            allowNull: false,
            unique: true,
            autoIncrement: true,
            primaryKey: true
        },
        [...]
    }
}
```

If you want to know how to initialize your schema, you should read [this](http://docs.sequelizejs.com/en/1.7.0/docs/models/#models).
